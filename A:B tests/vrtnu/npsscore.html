<style>
.nps-container {
    margin: 3rem 0px 0px 0;
    height: fit-content;
    background-color: var(--color-gray-125);
    width: 100%;
    border-radius: 0.25rem;
    padding: 1rem 1rem;
}
.nps-container>h2 {
    font: normal 600 1rem/1.5 Roobert,Arial,sans-serif;
}
.score-list {
    display: flex;
    align-content: center;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin: 2rem 3rem 1rem 3rem;
}
.help-nps {
    display: flex;
    justify-content: space-between;
    margin: 2rem 1rem -1rem;
}
.hide{
    display: none;
}
</style>
<script>
console.log("nps-start-injection");

// Al gestemd ? local storage check
let scored = localStorage.getItem("nps " + digitalData.page.program_name);
if (scored) {
    console.log("reeds NPS score gegeven")
} else {
   setnps();
};

function setnps(){
// main element
let nps = document.createElement('div'); 
let header = document.createElement('h2');
let text = document.createTextNode("Hoe waarschijnlijk is het dat je dit programma zou aanbevelen aan een vriend?");

// help tekst
let help = document.createElement('div');
let text1 = document.createTextNode("Onwaarschijnlijk");
let text2 = document.createTextNode("Heel waarschijnlijk");
let span1 = document.createElement('span');
let span2 = document.createElement('span'); 

// buttons
let scorelist = document.createElement('div');
for (let i = 0; i < 11; i++) {
    let npsbtn = document.createElement('button');
    npsbtn.setAttribute("class", "Dny3Ck ZIZiGs");
    npsbtn.setAttribute("name", "npsbtn");
    npsbtn.setAttribute("value", i);
    npsbtn.innerText = i;
    scorelist.appendChild(npsbtn);
}

//attributes
nps.setAttribute("class", "nps-container");
help.setAttribute("class", "help-nps");
scorelist.setAttribute("class", "score-list");

// appending
nps.appendChild(header);
header.appendChild(text);
span1.appendChild(text1);
span2.appendChild(text2);
let anchor = document.querySelector("#-description");
anchor.appendChild(nps);
nps.appendChild(help);
help.appendChild(span1);
help.appendChild(span2);
nps.appendChild(scorelist);

// logic after click on nps btn
const buttons = document.getElementsByName("npsbtn")
buttons.forEach(button => {
     button.addEventListener('click', handleClick, false);
});
    function handleClick() {
        // score aan analytics doorsturen
        console.log(this.textContent);
        _satellite.track('npsScore',{interaction:'nps score',interactionDetail:this.textContent});

        // bedanktboodschap
        help.setAttribute("class", "hide");
        scorelist.setAttribute("class", "hide");
        header.innerText="Bedankt voor je stem!"

        // local storage bijhouden dat al heeft gestemd voor dit programma
        localStorage.setItem("nps " + digitalData.page.program_name , this.textContent);
    };
};
</script>